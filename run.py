from retrieve import *
from generate import *
from dotenv import load_dotenv
load_dotenv()


raw_texts = [
    "این یک تست به زبان فارسی است.",
        "مراقبت با وابستگی یا حمایت افراطی کاملا ناسازگار است.",
    "امید متفاوت است با آرزومندی و خیالپردازی",
    "به گفته میراف شجاعت دست در دست امید پیش میروند",
    "با از میان رفتن آشفتگیها، زندگی پیچیدگی کمتری پیدا میکند",
    "این به معنای کمال نیست، اما میتواند ما را در مسیر کمال قرار دهد",
    """"برای درک بهتر این موضوع به مثالی از شرایطی که در آنها فرآیند زندگی را ناکافی احساس میکنیم دقت
کنید. زمانی که از نیروهای خاص خود استفاده نم یکنیم حس میکنیم زندگی راضی کننده نیست. مثلا
وقتی نویسندهای از نوشتن منع میشود یا پرستاری از تیمارداری، در چینین زمانهایی خود را موثر
احساس نمیکنیم و به نظر میرسد که بیرون زندگی ایستادهایم""",
"""او می‌گوید انسان در طول تاریخ، از زمانی که شکارچی-گردآورنده بوده تا اکنون که تمدن مدرنی بنا کرده، سازگاری فوق‌العاده‌ای با شرایط گوناگون داشته است و به همین دلیل به آینده انسان و هوش مصنوعی امیدوار است. بااین‌حال، او اذعان می‌کند که انقلاب صنعتی نیز برای همه مسیری هموار نبود. هاسابیس می‌گوید: «ما باید تلاش کنیم تا اختلال [ناشی از هوش مصنوعی] را به حداقل برسانیم.»   آینده هوش مصنوعی از نگاه مدیرعامل گوگل دیپ‌مایند از دیدگاه هاسابیس، آینده پس از دستیابی به هوش جامع مصنوعی (AGI)، در صورت مدیریت صحیح، یک آرمان‌شهر خواهد بود؛ دنیایی از «فراوانی رادیکال» که در آن، پیشرفت‌های پزشکی، دستیابی به انرژی همجوشی و سفرهای بین‌ستاره‌ای ممکن می‌شود. اما او مسائل بزرگ پیش رو را نیز نادیده نمی‌گیرد.  هاسابیس معتقد است که دستاوردهای هوش مصنوعی درحل بحران اقلیمی، بسیار بیشتر از هزینه‌های انرژی آن خواهد بود. همچنین به عقیده او جامعه باید برای دنیایی که در آن «دیگر نیازی به کارکردن نیست»، فکری اساسی داشته باشد و مفاهیمی مانند «هدف» و «معنا» را بازتعریف کند.""",
"""ررسی تأثیر اعتیاد به اینستاگرام و تیک‌تاک بر تصمیم‌گیری‌های مالی محققان به‌طور خاص بررسی کرده‌اند که آیا افرادی که علائم بیشتری از اعتیاد به ویدیوهای کوتاه دارند، دچار کاهش «زیان‌گریزی» نیز هستند یا خیر. زیان‌گریزی گرایشی روان‌شناختی است که به تمایل افراد برای جلوگیری و اجتناب از ضرر و زیان در مقابل سود اشاره دارد. این مفهوم به‌طور کلی به افراد کمک می‌کند از رفتارهای پرخطر پرهیز کنند.  تحقیقات قبلی نشان داده‌اند که افراد مبتلا به اختلال قمار، وابستگی به الکل و برخی اعتیادهای مواد مخدر، زیان‌گریزی کمتری دارند، اما اطلاعات کمی در مورد بروز این الگو در اعتیادهای رفتاری غیرمرتبط با مواد مخدر، مانند استفاده وسواسی از ویدیوهای کوتاه، وجود داشته است.  برای بررسی این موضوع، پژوهشگران 36 دانشجو 18 تا 24 ساله را انتخاب کردند. همه آنها پرسشنامه‌ای استاندارد درباره علائم اعتیاد به ویدیوهای کوتاه را تکمیل کردند که شامل سؤالاتی درباره دفعات تجربه نیاز شدید به مصرف محتوا، دشواری در کنترل استفاده و پیامدهای منفی ناشی از تماشای بیش از حد ویدیو بود.""",
"""اما برخلاف انتظار، داستان تایتانیک ۲ به نقشه‌ی راه ساخت یک کشتی عظیم، مدرن یا نوستالژیک شباهتی ندارد و بیشتر چرخه‌ای بی‌پایان از وعده‌های بزرگ، سکوت‌های طولانی و راه‌اندازی‌های مجدد را روایت می‌کند.  این پروژه که در سال ۲۰۱۲ با هیاهوی رسانه‌ای گسترده‌ای آغاز شد، قرار بود ادای احترامی باشکوه به کشتی اصلی باشد، اما در عمل به یک مطالعه‌ی موردی جذاب در مورد بلندپروازی‌های یک فرد، پیچیدگی‌های مهندسی مدرن و قدرت روابط‌عمومی تبدیل شد.  آیا تایتانیک ۲ سرانجام در دریا شناور می‌شود تا سفری را که خواهر بزرگ‌ترش هرگز به پایان نرساند، کامل کند؟ یا برای همیشه یک «کشتی رؤیایی» باقی خواهد ماند که تنها روی کاغذ و در کنفرانس‌های خبری پر زرق‌وبرق جان می‌گیرد؟ برای یافتن پاسخ، باید به دل داستانی پیچیده سفر کنیم.""",
"""ور خورشید نمی‌تواند به اعماق اقیانوس برسد، بنابراین حیات در کف اقیانوس و اطراف آن نمی‌تواند بر پایه فتوسنتز باشد. پژوهشگران مدت‌هاست فرض کرده‌اند که گودال‌های هادال میزبان جوامعی هستند که انرژی خود را از واکنش‌های شیمیایی دیگری به دست می‌آورند. گمان می‌رود این واکنش به گازهایی مانند سولفید هیدروژن و متان که از کف اقیانوس خارج می‌شوند، وابسته باشند. اما محققان می‌گویند چنین جوامعی که مبتنی بر کموسنتز هستند، به‌ندرت مستند شده‌اند.""",
"""ماهی مرکب غول‌پیکر علاوه‌بر اندازه عظیم، ویژگی‌های منحصربه‌فرد دیگری نیز دارد؛ قلاب‌هایی چرخان روی 2 شاخک اصلی آن که می‌توانند تا 360 درجه بچرخند و شکار را محکم نگه دارند. همچنین این گونه بزرگ‌ترین چشم در میان تمام جانوران زنده و منقرض‌شده را دارد؛ ویژگی‌ که احتمالاً برای دید در تاریکی مطلق اعماق اقیانوس تکامل یافته است.""",
"""ان ال پی (NLP) چیست ؟ به راستی (NLP) چیست ؟قبل از هر چیز باید بگویم که NLP مخفف چه کلماتى ست. Neuro-Linguistic Programming (برنامه ریزی عصبى- کلامى) معناى ابتدایى این هست که هرکسی به­ واسطه قدرت کلام می‌تواند بر سیستم عصبی‌ تأثیر بگذارد و ذهن خود یا دیگرى را برنامه‌ریزی کند! این علم، در کشورهاى اتحادیه اروپا و ایالات‌ متحده بسیار شناخته‌ شده ا­ست. حتی در فرم استخدامِ برخى سازمان‌ها هم میزانِ آشنایی باNLP مورد پرسش قرار می گیرد.  ابتدا مروری داشته باشیم بر تاریخچه‌ای از NLP  خب، داستان شکل‌گیری ان ال پى و دوره ان ال پی (NLP) از دهه ی هفتاد میلادی آغاز می گردد. روزی، دو نفر به نام­ های ریچارد بندلر و جان گریندر به‌طور اتفاقى در ساعتِ آزاد دانشگاه باهم آشنا و مشغولِ صحبت می شوند. این صحبتها، آنها را متوجه یک هدف مشترک می کند!  هدف مشترک شان را در قالب سؤال ایجاد می کنند:  موفقیت در زندگی آیا موفقیت در زندگى شانسى است؟ یا قاعده و فرمول دارد؟ آنها باور داشتند که اگر موفقیت در زندگی، شانسی باشد خب قطعاً هیچ کسی هیچ نقشی در تعیینِ آن نخواهد داشت! اما اگر قرار باشد قاعده و قانونی برای موفقیت در نظر گرفت می­ بایست آن را کشف کنند و در اختیار همه ی مردم بگذارند. ریچارد و جان، همچنان در حال مطالعه و تحقیق بودند تا اینکه تصمیم گرفتند رمزِ موفقیتِ موفق‌ترین آدم‌هایی که در دسترس شان بود را بپرسند! آنها این راه را، به عنوان سریع ترین راهکار ارائه دادند. برای همین، لیستی بلندبالا از اسامیِ چهره ­های موفق تهیه کردند. با مصاحبه و گفتگوهای طولانی که با این اشخاص صورت گرفت حجم گسترده ای از اطلاعاتِ پراکنده بدست آمد. ریچارد و جان همچنان با تلاش­ های خستگی ناپذیرشان ادامه می دادند تا اینکه این زحماتشان منجر به آشنایی با سه انسانِ نابغه شد!  ۱- خانم ویرجینیا ساتیر ۲- آقاى فریتز پرلز ۳- دکتر میلتون اریکسون  نتیجه تحقیقاتشان روى این سه نفر NLP را پدید آورد.""",
"""به گزارش گروه استان‌ها خبرگزاری دانشجو، طبق اعلام استانداری‌های برخی استان‌های سراسر کشور فردا (چهارشنبه ۱۵ مرداد) فعالیت ادارات، مدارس و دانشگاه‌ها تعطیل است و در برخی استان‌ها نیز فعالیت ادارات به صورت دورکاری صورت می‌گیرد.  لیست زیر به صورت تجمیعی از استان‌هایی تهیه شده است که فردا چهارشنبه ۱۵ مرداد تعطیل هستند:  تهران  اصفهان  قزوین  خراسان رضوی  خراسان جنوبی  گیلان  هرمزگان  کهگیلویه و بویراحمد  چهارمحال و بختیاری  فارس (فعالیت به صورت دورکاری)  ایلام (فعالیت به صورت دورکاری)  قم  آذربایجان شرقی  یزد  گلستان  خوزستان (فعالیت به صورت دورکاری)  سمنان  کرمان  خراسان جنوبی  بوشهر  البرز  کرمانشاه  کردستان  مرکزی""",
"""بر این اساس، اگر استقلال تصمیم بگیرد سهمیه هفتم خود را به یکی از بازیکنان لیگ برتری (مثلا عارف غلامی) اختصاص دهد، برای جذب سایر گزینه‌ها مانند عیسی آل‌کثیر یا رضا جعفری تنها در صورتی می‌تواند اقدام کند که آن‌ها یا بازیکن آزاد باشند یا تا پیش از پایان مهلت قانونی، قرارداد خود را فسخ کرده باشند تا پس از ۲۹ مرداد به‌عنوان سهمیه فیفا به استقلال اضافه شوند. این یعنی استقلال می‌تواند ابتدا بازیکنان سهمیه‌دار خود را جذب کرده و سپس با استفاده از ظرفیت بازیکن آزاد فیفا، ترکیب خود را تکمیل کند.  علاوه بر این، استقلالی‌ها باید سهمیه بازیکنان بزرگسال خود را نیز مدنظر قرار دهند. در صورت جذب سحرخیزان، او در فهرست بازیکنان زیر 23 سال ثبت خواهد شد. اما اکنون به طور رسمی استقلال پنج جای خالی در فهرست بازیکنان بزرگسال دارد که با جذب آدان، نازون، غلامی، آل‌کثیر و جعفری، پرخواهد شد.  در حال حاضر، نکته مثبت برای استقلال این است که هر سه بازیکن مورد توجه یعنی عارف غلامی، رضا جعفری و عیسی آل‌کثیر در وضعیت بازیکن آزاد قرار دارند. غلامی که در دوره نخست حضور ساپینتو یکی از بازیکنان فیکس و محبوب سرمربی پرتغالی بود و در قهرمانی بدون شکست استقلال در لیگ بیست‌ویکم نقش مهمی داشت، اکنون نیز با توجه به مصدومیت آشورماتوف در اولویت قرار گرفته است. با توجه به همه این شرایط، تصمیم نهایی درخصوص اینکه کدام بازیکن به‌عنوان سهمیه هفتم جذب شود و کدام‌یک باید در قالب سهمیه آزاد به تیم بپیوندد، به مدیریت نقل‌وانتقالات استقلال و برنامه‌های ساپینتو برای ترکیب فصل آینده بستگی دارد.""",
"""آنتن - ماده گرایان کد: 2142993 14 مرداد 1404 ساعت 11:50 با سند و مدرک به مجامع بین‌المللی خواهیم رفت فوری: حمله حقوقی تراکتور به پرسپولیس در فیفا! باشگاه تراکتور اعلام کرد علیه پرسپولیس در دادگاه‌های بین‌المللی طرح دعوی خواهد کرد. فوری: حمله حقوقی تراکتور به پرسپولیس در فیفا! به گزارش “ورزش سه”، در شرایطی که یک هفته از صدور حکم علیرضا بیرانوند می‌گذرد، باشگاه تبریزی در اولین واکنش رسمی خود اعلام کرد که هیئت‌مدیره این باشگاه در جلسه رسمی ماموریت‌های جدیدی را به واحد حقوقی این باشکاه محول کرده است.  بر این اساس آنها با تهیه مستندات در این پرونده ، از تصمیم پرسپولیس برای ارجاع پرونده به دادگاه حکمیت ورزش استقبال می‌کنند.  با این حال نکته جالب این است که باشگاه تراکتور اعلام کرده آنچه را که به عنوان «شعارهای نژادپرستانه هواداران پرسپولیس» وجود دارد، در این مدت مسکوت نگه داشته و در فیفا مطرح نکرده بود اما حالا این اقدام را انجام خواهد داد.    این در حالی است که به نظر می‌رسد تراکتور قصد داشت در پرونده مصالحه از حق شکایت خود در این پرونده چشم‌پوشی کند و در حالی که تصور میشد پرونده شکایت از هواداران پرسپولیس مدتها پیش در فیفا مطرح شده اما به نظر تراکتور حالا این اقدام را انجام خواهد داد.   2139810 بیانیه تراکتور را بخوانید:  به گزارش رسانه رسمی باشگاه تراکتور، هیأت‌مدیره این باشگاه در جلسه روز سه‌شنبه ۱۴ مرداد ماه ۱۴۰۴، با بررسی جزئیات رأی اعلام‌شده در پرونده علیرضا بیرانوند و موضع‌گیری‌های اخیر باشگاه پرسپولیس، تصمیماتی اتخاذ کرد.  در این جلسه، اعضای هیأت‌مدیره ضمن تأکید بر مواضع مالک باشگاه مبنی بر ارجحیت منافع و مصالح ملی بر اختلافات فوتبالی و ضرورت پرهیز از تنش، رفتار اخیر باشگاه پرسپولیس را در تضاد با این اصل دانسته و آن را اقدامی در جهت تشدید فضای متشنج در افکار عمومی و شبکه‌های اجتماعی و تحریک هواداران عنوان کردند. اعضای هیات مدیره باشگاه تراکتور  اظهارات اخیر برخی مقامات باشگاه پرسپولیس را ناشی از سوءتفاهم و سوءاستفاده از حسن نیت باشگاه تراکتور دانسته و در همین راستا، ضمن استقبال از تصمیم پرسپولیس برای پیگیری پرونده در مراجع بین‌المللی، طی مصوبه‌ای، واحد حقوقی باشگاه را مأمور بررسی دقیق رأی صادرشده و تهیه مستندات کامل کردند.  اعضای هیأت‌مدیره باشگاه تراکتور معتقدند که با توجه به مستندات موجود، بررسی این پرونده در مراجع بین‌المللی و بدون در نظر گرفتن ملاحظات و مصالح داخلی، حقیقت را روشن خواهد کرد.  همچنین در راستای دفاع از شأن میلیون‌ها هوادار تراکتور و مردم آذربایجان، پرونده شعارهای نژادپرستانه و قوم‌گرایانه هواداران باشگاه پرسپولیس نیز که پیش از این با وعده مسئولان برای برخورد قانونی مسکوت مانده بود، از طریق مراجع قضایی بین‌المللی نظیر FIFA و AFC پیگیری خواهد شد.""",
""" رامین درباره ماجرای پیوستنش به الوصل و کج شدن مسیرش به استقلال توضیح داد: من تیکت داشتم‌که بروم الوصل دبی قرارداد ببندم و هافبک دفاعی آن باشگاه رباط صلیبی می‌دهد و این اتفاق نمی‌افتد و خدا به من گفت دیگر وقتش است. من این تصمیم را با تمام وجودم گرفتم. روزی که به دفتر استقلال می‌روم و قسم می‌خورم، پشت آن قسم ماه‌ها فکر بوده و سال‌ها در ذهن من مرور می‌شده. در این دنیا چقدر قرار است زندگی کنم؟ وقتی می‌توانم دل سی میلیون هوادار استقلال را شاد کنم چرا این کار را نکنم.  رضاییان با دلجویی از کسانی که با پیوستن او به استقلال ناراحت شدند گفت: شاید خیلی‌ها از من ناراحت شدند، دست‌شان را می‌فشارم و معذرت‌خواهی می‌کنم که ناراحت شدند ولی من این انتخاب را با فکر کردم چون قرار است یک روزی از این دنیا بروم. دوست داشتم این محبتی که هواداران استقلال سال‌ها به من داشتند و من در خیابان می‌دیدم‌شان و لمس‌شان می‌کردم، گفتم افتخار این را داشته باشم و در این تیم بازی کنم. تصمیم هیجانی نبود. من به الوصل هم فکر می‌کردم و صد در صد نبود ولی وقتی پازل چیده شده من در نگاه خدا چه تصمیمی دارم بگیرم؟""",

]


# logging.basicConfig(level=logging.DEBUG)


API_KEY=os.getenv('API_KEY')
BASE_URL = os.getenv('BASE_URL')
MODEL_NAME = os.getenv('MODEL_NAME')


if __name__ == "__main__":
    user_query = input('Enter your question:\n')
    pre_prompt = """You are a RAG system, some question will be asked by the user, you need to answer based on only the retreived docs and only the question asked and not any irrelevant retrieved docs."""
    retriever = Retriever(new_vdb=True)
    retriever.create_vdb(raw_texts = raw_texts, chunk_size=64, chunk_overlap=4)
    retrieved_docs = retriever.load_vdb(query=user_query, k=3)
    final_docs = retriever.extract_docs(retrieved_docs=retrieved_docs)

    prompt = pre_prompt + f'\n\nUser question:\n{user_query}' + '\n' + 'Retrieved docs:\n' + final_docs
    llm = LLM()
    llm.llm_call(prompt=prompt)
